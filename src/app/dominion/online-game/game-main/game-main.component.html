<ng-container *ngIf="{
      receiveDataDone: receiveDataDone$ | async,
      isMyTurn:        isMyTurn$        | async,
      chatOpened:      chatOpened$      | async
    } as data">
  <div class="body">
    <div class="sidebar">
      <button mat-button (click)="toggleSideNav( sidenav )"
          matTooltip="show/hide messages" matTooltipPosition="after">
        <mat-icon>textsms</mat-icon>
      </button>
      <mat-button-toggle-group [vertical]="true" (change)="toggleAutoScroll( $event.value )">
        <mat-button-toggle [value]="false" [checked]="!autoScroll"
              matTooltip="auto scroll off" matTooltipPosition="after">
          <mat-icon>stop</mat-icon>
        </mat-button-toggle>
        <mat-button-toggle [value]="true"  [checked]="autoScroll"
              matTooltip="auto scroll on" matTooltipPosition="after">
          <mat-icon>arrow_downward</mat-icon>
        </mat-button-toggle>
      </mat-button-toggle-group>

      <span class="spacer"></span>

      <ng-container *ngIf="data.receiveDataDone">

        <ng-container *ngIf="data.isMyTurn">
          <button mat-button (click)="goToNextPhase()"
              matTooltip="Go to next phase" matTooltipPosition="after">
            <mat-icon class="goToNextPhaseIcon">file_download</mat-icon>
          </button>
          <button mat-button (click)="goToNextPlayer()"
              matTooltip="Finish my turn" matTooltipPosition="after">
            <mat-icon>forward</mat-icon>
          </button>
        </ng-container>

        <app-turn-info></app-turn-info>

        <button mat-button (click)="sortMyHandCards()"
            matTooltip="Sort hand cards" matTooltipPosition="after">
          <mat-icon>sort</mat-icon>
        </button>
      </ng-container>
    </div>

    <mat-sidenav-container class="sidenavContainer">
      <mat-sidenav #sidenav class="sidenav" mode="side" disableClose="true"
            [opened]="data.chatOpened" >
        <app-chat [autoScroll]="autoScroll" [sidenav]="sidenav"> </app-chat>
      </mat-sidenav>

      <div class="margined-element">
        <app-waiting-spinner [done]="data.receiveDataDone">
        </app-waiting-spinner>
      </div>
      <div>
        <div class="shared-area_other-player-area">
          <app-shared-area class="shared-area"
            (cardClicked)="onCardClicked( $event )">
          </app-shared-area>
          <app-other-player-area
            (cardClicked)="onCardClicked( $event )">
          </app-other-player-area>
        </div>
        <app-turn-player-area
          (cardClicked)="onCardClicked( $event )">
        </app-turn-player-area>
      </div>

      <div class="margined-element test">
        <button mat-raised-button (click)="test_faceUpAllCards()">faceUp</button>
        <button mat-raised-button (click)="test_faceDownAllCards()">faceDown</button>
        <button mat-raised-button (click)="test_isButtonAllCards()">isButton</button>
        <button mat-raised-button (click)="test_isNotButtonAllCards()">isNotButton</button>
      </div>

    </mat-sidenav-container>
  </div>
</ng-container>
